<!DOCTYPE html>
<html lang="en" style="height: 100%">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Elements Culmyca | 2017 </title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
	<link href="css/main.css" rel="stylesheet">
	<link href="css/animate.css" rel="stylesheet">	
	<link href="css/responsive.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="slick/slick.css">
	<link rel="stylesheet" type="text/css" href="slick/slick-theme.css">
	<style type="text/css">
	body:before {
		  content: "";
		  display: block;
		  position: fixed;
		  left: 0;
		  top: 0;
		  width: 100%;
		  height: 100%;
		  z-index: -10;
		  background: url('images/23.jpg') no-repeat center center;
		  -webkit-background-size: cover;
		  -moz-background-size: cover;
		  -o-background-size: cover;
		  background-size: cover;
		}
	</style>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
    
    window.onload=function(){
  
   	 $("#phoneno").val('');
  $('#fullname').val('');
  $('#college').val('');
  $('#email').val('');
  $('#paymenttxnid').val('');
  $('#paymentphoneno').val('');
          $.ajax({

            type: "GET",
            crossDomain: true,
            dataType: 'json',
            url: "http://elementsculmyca2017.herokuapp.com/api/v1/eventlist/category/Dramatics"
            //data: {username:username,password:password}
   //success: function() { $('body').css('display', 'block');}
    //error: function() { alert('Failed!'); }

        }).done(function(data){
          $("#wait2").css("display","none");
         
        
            var events=JSON.parse(JSON.stringify(data));
            var eve="";
         
          for(var i=0; i<events.length; i++)
          {
              eve+='<div class="container" style="width: 100%;padding-bottom: 2%;"><div class="col-md-4"><h1>';
              eve+=events[i].startTime+' To '+events[i].endTime+'<br />'+events[i].venue;
              eve+='</h1></div><div class="col-md-4" style="text-align: center;"><h1 style="font-size: 60px;">'+events[i].eventName+'</h1></div><div class="col-md-4"><h1>Organized By '+events[i].club+'</h1></div></div><div class="container" style="width: 100%;padding-bottom: 2%"><div class="col-md-4"><img src="images/jhalak.jpg" class="img-responsive"></div><div class="col-md-4">'+events[i].description+'</div><div class="col-md-4">Rules:<br>'+events[i].rules+'</div></div><div class="container"><div class="col-md-12"><button class="register-button"  data-toggle="modal" data-target="#myModal" data-id="'+events[i]._id+'" data-whatever="Snaptastic">Register</button></div></div><hr style="margin-left: -30px;width:120%">';
 
               
          }   
   
          document.getElementById("data").innerHTML=eve;      
          	$(".preloader").css("display","none");
          
        })
$(document).on("click", ".register-button", function () {
     var eventId = $(this).data('id');
     $("#eventid").val(eventId );
     // As pointed out in comments, 
     // it is superfluous to have to manually call the modal.
     // $('#addBookDialog').modal('show');
});

}

function testphone(phone)
{if(isNaN(phone))
  alert("Enter Phone No");
 else if(phone.length===10)
  {$("#wait1").css("display","block");

    $.ajax({

            type: "GET",
            crossDomain: true,
            dataType: 'json',
            url: "https://elementsculmyca2017.herokuapp.com/api/v1/userinfo/"+phone
    //success: function() { alert("Success"); },
    //error: function() { alert('Failed!'); }

        }).done(function(data){
          $("#wait1").css("display","none");
          data=jQuery.makeArray(data);
          obj=JSON.parse(JSON.stringify(data));
          if(obj[0].message=='user doesnot exist')
            {
                alert("The user does not already exist");
            }
            else
          {var email=obj[0].email;
            var fullname=obj[0].fullname;
            var college=obj[0].college;
            $("#email").val(email);
            $("#fullname").val(fullname);
            $("#college").val(college);
          }

        })
      }
}


function create()
{



var phoneno=$("#phoneno").val();
var email= $("#email").val();
var fullname= $("#fullname").val();
var college = $("#college").val();
var paymenttxnid=$("#paymenttxnid").val();
var paymentphoneno= $("#paymentphoneno").val();
if(paymenttxnid=='')
paymenttxnid='cash';


var eventid=$('#eventid').val();

var atpos = email.indexOf("@");
var dotpos = email.lastIndexOf(".");

if(phoneno!='' && email!='' && fullname!='' && college!='')
  { 
    
  	$("#wait2").css("display","block");

  	$.ajax({

            type: "POST",
            crossDomain: true,
            dataType: 'json',
            url: "https://elementsculmyca2017.herokuapp.com/api/v1/register/",
            data: {phoneno:phoneno,email:email,fullname:fullname,college:college,eventid:eventid,paymenttxnid:paymenttxnid,paymentphoneno:paymentphoneno}
            
           //success: function() { alert("Success"); },
           //error: function() { alert('Failed!'); }


        }).done(function(data){
        	
        	 var obj=JSON.stringify(data);
        	 	
    			if(obj[12]=='u')
    			{
    		$("#wait2").css("display","none");  
			$('#myModal').modal('hide');
         	 $('#myModal2').modal('toggle'); 
    			}
    		else
    		{
          $("#wait2").css("display","none");  
			$('#myModal').modal('hide');
         	 $('#myModal1').modal('toggle'); 
         	 } 
         	 ok();
                 
           
        })
      	
         }
         else
         {
         		alert("Fill all the fields!!")
         }
        
        
}


function ok()
  {
        $("#phoneno").val('');
        $('#fullname').val('');
        $('#college').val('');
        $('#email').val('');
        $('#paymenttxnid').val('');
        $('#paymentphoneno').val('');
        

  }



    </script>
    <style type="text/css">
	.preloader {
    position: fixed;
    top:50%;
    left:50%;
    width: 100%;
    height: 100%;
    
    z-index: 99;
	}
    </style>


</head>
<div class="preloader">
		<img src="loader.gif" alt="Preloader image">
	</div>

<body style="width: 100%;background-color: #428bca;overflow-x:hidden;">
	
	<header id="header" role="banner">		
		<div class="main-nav">
			<div class="container">
				<div class="header-top">
					<div class="pull-right social-icons">
						<a href="#"><i class="fa fa-twitter"></i></a>
						<a href="#"><i class="fa fa-facebook"></i></a>
						<a href="#"><i class="fa fa-instagram"></i></a>
					</div>
				</div>     
		        <div class="row">	        		
		            <div class="navbar-header" style="transform:translateX(-400px);transition: all .5s">
		                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		                    <span class="sr-only">Toggle navigation</span>
		                    <span class="icon-bar"></span>
		                    <span class="icon-bar"></span>
		                    <span class="icon-bar"></span>
		                </button>
		                <a class="navbar-brand" href="index.html">
		                	<img class="img-responsive" src="images/logo.png" alt="logo">
		                		<div style="text-align: right;color: white;margin-right: 10px;">
		                		<h2 style="margin-top:10px;" class="event-nav">Dramatics</h2>
		                		</div>
		                </a>                    
		            </div>
		            <div class="collapse navbar-collapse">
		                <ul class="nav navbar-nav navbar-right" style="transform:translateX(600px);transition: all .5s">                 
		                    <li class="active"><a href="index.html" onclick="location.replace('index.html'),'_top'">Home</a></li>                       
		                    <li class="scroll"><a href="#events">Events</a></li>
		                    <li class="scroll"><a href="#about">About</a></li>        
		                    <li class="scroll"><a href="#contact">The Team</a></li>       
		                </ul>
		            </div>
		        </div>
	        </div>
        </div>                    
    </header>
    <!--/#header--> 

    <section class="container home-events" id="home-events">	
		<div class="col-md-3" style="height: 100%;">
		</div>
		<div class="container row" style="width: auto">
			<div class="col-md-6" style="text-align: center;padding-top: 20%;padding-bottom: 2%
			;box-shadow: 1px 1px 1px 1px white">
			<h1 style="font-size: 60px;margin-bottom: 10%">SomeThing Heading</h1>
			<br>
			<h2>Description</h2>
			</div>
			<div class="col-md-12">
			<a data-scroll href="#events">
			<img src="images/arrow.png" class="img-responsive arrow" style="display: block;margin:0 auto;padding-bottom: 2%;
			margin-top: 3%;">
			</a>
			</div>
		</div>
		<div class="col-md-3" style="height: 100%">
		</div>
    </section>
	<!--/#home-->
	<div id="wait" style="display:none;width:69px;height:89px;border:0px solid black;position:absolute;top:40%;left:50%;padding:2px;"><img src='loaderimage.gif' width="64" height="64" /><br>Loading..</div>

	<section id="events" style="height: auto;background-position: center;
		background-attachment: fixed;background-repeat: repeat;">
		<div class="container" style="padding: 2%; width: 100%" id="data">
		
		
		</div>

	</section><!--/#Events-->
	<!-- Trigger the modal with a button -->


	<div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" style="color:black">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
						<div class="col-md-12 form-group" id="form" style="background-color: rgba(68, 25, 80, 0.9);color:white;padding: 5%">
						<h1><span class="modal-title">Your Registration is successful!!</span></h1>
							
						<button type="button"  style="background-color:#4858b1;color:white;margin-left:500px;" data-dismiss="modal" aria-label="Close">Ok</button>	
						</div>	
						
						
		    </div>
		  </div>
		</div>

		<div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" style="color:black">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
						<div class="col-md-12 form-group" id="form" style="background-color: rgba(68, 25, 80, 0.9);color:white;padding: 5%">
						<h1><span class="modal-title">You Already Have been Registered!!</span></h1>
							
						<button type="button"  style="background-color:#4858b1;color:white;margin-left:400px;" data-dismiss="modal" aria-label="Close">Ok</button>	
						</div>	
						
						
		    </div>
		  </div>
		</div>


		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" style="color:black">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
						<div class="col-md-12 form-group" id="form" style="background-color: rgba(68, 25, 80, 0.9);color:white;padding: 5%">
						<div id="wait1" style="display:none;width:69px;height:89px;border:0px solid black;position:absolute;top:30%;left:50%;padding:2px;"><img src='loaderimage.gif' width="64" height="64" /><br>Fetching User Information...</div>
						<div id="wait2" style="display:none;width:69px;height:89px;border:0px solid black;position:absolute;top:30%;left:50%;padding:2px;"><img src='loaderimage.gif' width="64" height="64" /><br>Registering...</div>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true" class="glyphicon glyphicon-remove" style="background-color: black;color:white"></span></button>
						<h1><span class="modal-title">Register</span></h1>
							<form id="payment">
							<div class="form-group">
							<input name="eventid"  id="eventid" type="hidden" required="true" pattern="^\d{10}$" placeholder="eventid" class="form-control" style="width: 50%">
							</div>
							<div class="form-group">
                  			<input type="hidden" class="form-control" placeholder="qr" name="qr" id="qr" />
                			</div>
							<div class="form-group">
								<label for="Phone-number">Phone Number</label> 
								<input type="text" class="form-control" placeholder="Phone No." name="phoneno" id="phoneno" onkeyup="testphone(this.value);" maxlength="10" style="width: 50%">
						
							</div>
							<div class="form-group">
								<label for="Name">Full Name</label>
								<input type="text" class="form-control" placeholder="Full Name" name="fullname" id="fullname" style="width: 50%" required="true">
							</div>
							<div class="form-group">
								<label for="Email">Email</label>
								<input type="email" class="form-control" placeholder="Email" name="email" id="email" style="width: 50%" required="true">
							</div>
							<div class="form-group">
								<label for="college">College</label>
								<input type="text" class="form-control" placeholder="College" name="college" id="college" style="width: 50%" required="true">
							</div>
							<div class="form-group">Payment: &nbsp;
								<label class="radio-inline">
									<input type="radio" name="payment" class="online-radio">Online
								</label>
								<label class="radio-inline">
									<input type="radio" name="payment" class="offline-radio">Offline
								</label>
							</div><br>
							<div class="form-group transaction" style="display: none">
								<label for="Transaction">Transaction Id</label>
								<input type="text" class="form-control" placeholder="Payment Transaction Id" name="paymenttxnid" id="paymenttxnid" style="width: 50%">
								<br>
							</div>
							<div class="form-group transaction" style="display: none">
								<label>Payment Phone No</label>
								<input type="text" class="form-control" placeholder="Payment Phone No." name="paymentphoneno" id="paymentphoneno" style="width: 50%">
								<br>
							</div>
							<button type="submit" class="btn-primary btn-lg" id="submit-btn" style="background-color: #4858b1;
							border: 0px solid red;transition: all .2s" onclick="create()">
								Register
							</button>
							</form>
						</div>	
		    </div>
		  </div>
		</div>
			
    <footer id="footer">
        <div class="container">
            <div class="text-center" style="margin-top: 20px;">
                <p>Culmyca 2017</a><br> <a target="_blank" href="#">YMCA University of Science and Technology</a></p>                
            </div>
        </div>
    </footer>
    <!--/#footer-->
  
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
	<script type="text/javascript" src="js/smoothscroll.js"></script>
    <script type="text/javascript" src="js/jquery.parallax.js"></script>
    <script type="text/javascript" src="js/coundown-timer.js"></script>
    <script type="text/javascript" src="js/jquery.scrollTo.js"></script>
    <script type="text/javascript" src="js/jquery.nav.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <script type="text/javascript"src="js/prefixfree.min.js"></script>
    <script src="https://unpkg.com/scrollreveal@3.3.2/dist/scrollreveal.min.js"></script>
    <script type="text/javascript" src="slick/slick.min.js"></script>
    <script src="js/smooth-scroll.min.js"></script>
    <script>
    $(document).ready(function(){
		$(".courosal").css({"transform": "translateY(-800px)"});
		$("html").css({"height":"100%"});
		$(".navbar-header").css({"transform": "translateX(0px)"});
		setTimeout(function() {
		$(".navbar-right").css({"transform": "translateX(0px)"});},200);
		setTimeout(function(){
		$(".carousel-caption").css({"transform": "translateX(0px)"});},400);
	});

 	$(window).resize(function() {
      $(".bg > .ibg-bg").css({
        width: $(window).outerWidth(),
        height: $(window).outerHeight()
      })
   	});

 	$(document).ready(function(){
  	$('.slider').slick({
      	slidesToShow: 4,
  		slidesToScroll: 3,
  		autoplay: true,
  		autoplaySpeed: 2000,
  		infinite: true,
  		 responsive: [
    {
      breakpoint: 1024,
      settings: {
        slidesToShow: 3,
        slidesToScroll: 3,
        infinite: true,
        dots: true
      }
    },
    {
      breakpoint: 600,
      settings: {
        slidesToShow: 2,
        slidesToScroll: 2,
        autoplaySpeed: 1000,
      }
    },
    {
      breakpoint: 480,
      settings: {
        slidesToShow: 1,
        slidesToScroll: 1,
        autoplaySpeed: 1000,
      }
    }
  ]
  	});
	});
 	window.sr = ScrollReveal();
	sr.reveal('#explore',{origin: 'left', distance: '200px', viewFactor: '0.1'});
	sr.reveal('#events',{origin: 'left', distance: '200px', viewFactor: '0.1'});
	sr.reveal('#about',{origin: 'bottom', distance: '200px', viewFactor: '0.1'});
	sr.reveal('#Widgets',{origin: 'top', distance: '200px', viewFactor: '0.1'});
	    smoothScroll.init({
	    	easing: 'easeInOutCubic',
	    	speed:1000
	    });
	 $('#myModal').on('show.bs.modal', function (event) {
  	var button = $(event.relatedTarget) // Button that triggered the modal
  	var recipient = button.data('whatever') // Extract info from data-* attributes
  	// If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
  	// Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
  	var modal = $(this)
  	modal.find('.modal-title').html('Register:- <br> Fill out this form')
  	modal.find('.modal-body input').val(recipient)
	});
	$('.online-radio').focus(function() {
	$('.transaction').css({"display":"initial"})
	});
	$('.offline-radio').focus(function() {
	$('.transaction').css({"display":"none"})
	})
	</script>
</body>
</html>
